<!DOCTYPE html>
<head>
<meta charset="UTF-8" />
</head>
<style>
@keyframes musicindicate{
0%{
top: -30px;
}
3.84615384615%{
top: 0px;
}
96.1538461538%{
top: 0px;
}
100%{
top: -30px;
}
}</style>
<body>
<br>
<br>
<br>
<div id="debug" style="cursor: unset">
<div>~~~ Music Control ~~~</div>
<div id="MC1" style="color: #888888" onclick="pausemusic()">Pause Music</div>
<div id="MC2" style="color: #888888" onclick="playmusic(0)">Stop Music</div>
<div>~~~ Songs ~~~</div>
<div id="S1" style="color: #000000" onclick="playmusic(1)">Rock My Emotions</div>
<div id="S2" style="color: #000000" onclick="playmusic(2)">Mysterious Song</div>
<div>~~~ Error Handling ~~~</div>
<div id="E1" style="color: #000000" onclick="playmusic(10000)">Id Not Existing</div>
<div id="E2" style="color: #000000" onclick="playmusic(10001)">Id Check Fail</div>
<div id="E3" style="color: #000000" onclick="playmusic(10002)">Malformed Data</div>
</div>
</body>
<script>
var nowplaying=["","",""] //album, name, artist
var music=""
var musiccontrols=[false] // Playing?
function playmusic(id){
//console.log(id)
if (id>0){
fetch("music/"+id+".txt")
  .then((res) => res.text())
  .then((text) => {
	if (music!==""){
	music.pause();
	music=""
	musiccontrols[0]=false
	nowplaying[0]=""
	nowplaying[1]=""
	nowplaying[2]=""
	}
    var musicfinder=text.split("#")
	if (musicfinder.length==4){
	if (parseInt(musicfinder[0])==id){
	nowplaying[0]=musicfinder[1]//unused
	nowplaying[1]=musicfinder[2]
	nowplaying[2]=musicfinder[3]
	musicindicator(1)
	music=new Audio("music/"+musicfinder[2]+'.mp3');
	music.play();
	music.loop=true;
	musiccontrols[0]=true
	document.getElementById("MC1").style="color: #000000"
	document.getElementById("MC2").style="color: #000000"
	} else {
	console.log(text.length)
	console.log(id)
	musicindicator(5)
	}
	} else if(text.length==469 && musicfinder.length==1) {
	musicindicator(6)
	} else {
	musicindicator(7)
	}
  })
  //.catch((e) => console.error(e));
} else if (music!==""){
music.pause();
music=""
musiccontrols[0]=false
nowplaying[0]=""
nowplaying[1]=""
nowplaying[2]=""
musicindicator(2)
document.getElementById("MC1").style="color: #888888"
document.getElementById("MC1").innerHTML="Pause Music"
document.getElementById("MC2").style="color: #888888"
}
}
function pausemusic(){
if (music!==""){
if (musiccontrols[0]==true){
music.pause()
musiccontrols[0]=false
musicindicator(3)
document.getElementById("MC1").innerHTML="Play Music"
} else if (musiccontrols[0]==false){
music.play()
musiccontrols[0]=true
musicindicator(1)
document.getElementById("MC1").innerHTML="Pause Music"
}
}
}
function musicindicator(ii){
if (document.getElementById("playerindicator")){
document.getElementById("playerindicator").remove()
}
var playingmusic="Unknown Error"
if (ii==0){
playingmusic="None" //Do not use this.
} else if (ii==1){
playingmusic=nowplaying[2]+" - "+nowplaying[1]
} else if (ii==2){
playingmusic="Music Stopped"
} else if (ii==3){
playingmusic="Music Paused"
} else if (ii==4){
playingmusic=musicfinder[3]+" - "+musicfinder[2]
} else if (ii==5){
playingmusic="Error - Id check failure"
} else if (ii==6){
playingmusic="Error - Id does not exist"
} else if (ii==7){
playingmusic="Error - Data recieved malformed"
}
var musicind = document.createElement("div")
musicind.id="playerindicator"
musicind.style="height: 30px; background-color: #444444; color: #AAAAAA; position: absolute; padding-left: 3px; padding-right: 5px; width: auto; font-size: 150%; animation: musicindicate 5.2s ease-out 1; left: 0px; top: -30px"
musicind.innerHTML='<div style=""><a>ùÖ† </a><b id="playing">'+playingmusic+'</b></div>'
document.body.append(musicind)
}
</script>
